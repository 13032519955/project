<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>图片上传功能</title>
</head>
<body>
    <input type="file" multiple>
    <button id="json">发送post请求，携带json数据</button>
    <button id="url">发送post请求，携带urlEncode数据</button>
    <button id="raw">发送post请求，携带raw数据</button>

    <script>
    	/** 图片上传 */
        let ele = document.querySelector('input');
        ele.onchange = (e)=>{
            console.log('e...', e);
            let files = e.target.files;
            console.log(files.length);
            let form = new FormData();
            for (let i=0; i<files.length; i++){
                form.append(files[i].name, files[i])
            }
            fetch('http://169.254.78.172:10001/upload', {
                method: 'POST',
                body: form
            }).then(res=>res.json())
            .then(body=>{
                console.log('body...', body);
            })
        }

        /** 发送json */
        let json = document.querySelector('#json');
        json.onclick = ()=>{
        	fetch('http://169.254.78.172:10001/jsonRequest', {
	        	method: 'POST',
	        	headers: {
	            	"Content-Type": "application/json; charset=utf-8",
	            	// "Content-Type": "application/x-www-form-urlencoded",
	        	},
	        	body: JSON.stringify({name:'majian'}) 
	        }).then(res=>res.json()).then(body=>console.log('body...', body));
        }

        /** 发送urlEncoded */
        let url = document.querySelector('#url');
        url.onclick = ()=>{
        	fetch('http://169.254.78.172:10001/urlRequest', {
	        	method: 'POST',
	        	// headers: {
	            	// "Content-Type": "application/json; charset=utf-8",
	            	// "Content-Type": "application/x-www-form-urlencoded",
	        	// },
	        	body: JSON.stringify({name:'majian'}) 
	        }).then(res=>res.json()).then(body=>console.log('body...', body));
        }

         /** 发送raw */
        let url = document.querySelector('#url');
        url.onclick = ()=>{
        	fetch('http://169.254.78.172:10001/urlRequest', {
	        	method: 'POST',
	        	// headers: {
	            	// "Content-Type": "application/json; charset=utf-8",
	            	"Content-Type": "text/plain",
	        	// },
	        	body: JSON.stringify({name:'majian'}) 
	        }).then(res=>res.json()).then(body=>console.log('body...', body));
        }
    </script>
</body>
</html>